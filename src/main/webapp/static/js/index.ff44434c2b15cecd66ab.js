webpackJsonp([2],{"0aTS":function(t,e){},SMjw:function(t,e){},U67u:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),o={data:function(){return{TypeData:{content:[]}}},created:function(){this.getItem()},methods:{getItem:function(){var t=this,e={typeId:this.getUrlParam("v")};this.axios.post("/InfoEntry/type/getTypeById",this.qs.stringify(e)).then(function(e){e.data.content=JSON.parse(e.data.content),t.TypeData=e.data})},getUrlParam:function(t){var e=document.location.toString().split("?");if(e.length>1){for(var n,a=e[1].split("&"),o=0;o<a.length;o++)if(null!=(n=a[o].split("="))&&n[0]==t)return n[1];return""}return""}}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"window-center",attrs:{id:"app"}},[e("my-entry",{attrs:{TypeData:this.TypeData}})],1)},staticRenderFns:[]};var s=n("VU/8")(o,r,!1,function(t){n("krhF")},"data-v-a3694648",null).exports,i=n("OFNa"),l=n.n(i),u=(n("SMjw"),n("aozt")),p=n.n(u),c=n("6iV/"),f=n.n(c),d=n("mvHQ"),h=n.n(d),v=n("BO1k"),m=n.n(v),w={props:["TypeData"],name:"my-entry",data:function(){return{formModel:{},ruleValidate:{},showInput:{show:!1,val:0,userName:"姓名",userList:[]}}},created:function(){var t=this;this.axios.post("/InfoEntry/user/getAllUser").then(function(e){t.showInput.userList=e.data,console.info("用户",t.showInput.userList)});var e=setInterval(function(){null!=t.TypeData&&(t.generateInput(),clearInterval(e))},50)},methods:{InputClick:function(){var t=this;if(null!=this.showInput.val&&0!=this.showInput.val){var e={typeId:this.TypeData.id,userId:this.showInput.val};this.axios.post("/InfoEntry/content/getContentByTypeIdAndUserId",this.qs.stringify(e)).then(function(e){console.info(e),""==e.data&&(e.data={}),console.info("shtInputVal",e.data),t.formModel=e.data}),this.showInput.show=!0}},getUserName:function(){var t=!0,e=!1,n=void 0;try{for(var a,o=m()(this.showInput.userList);!(t=(a=o.next()).done);t=!0){var r=a.value;r.no==this.showInput.val&&(this.showInput.userName=r.name)}}catch(t){e=!0,n=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw n}}},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var n={type:e.TypeData.id,user:e.showInput.val,content:h()(e.formModel)};e.axios.post("/InfoEntry/content/saveByContent",e.qs.stringify(n)).then(function(t){1==t.data.state?e.$Modal.confirm({title:"保存成功",content:"您提交的数据已成功保存 , 您现在可以关闭浏览器了",onOk:function(){e.closeCurrentPage()}}):e.$Modal.error({title:"保存失败",content:t.data.msg})})}else e.$Message.error("请填写完整再提交")})},generateInput:function(){var t={},e={};this.TypeData.content.forEach(function(n,a){t["val"+a]="",e["val"+a]=[{required:n.required,message:"　　　　　　　　　"+n.name+"不能为空",trigger:"blur"}]}),this.formModel=t,this.ruleValidate=e},closeCurrentPage:function(){var t=navigator.userAgent;-1!=t.indexOf("Firefox")||-1!=t.indexOf("Chrome")?(window.location.href="about:blank",window.close()):(window.opener=null,window.open("","_self"),window.close())}}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{attrs:{id:"entry_form"}},[0!=t.TypeData.content.length?n("Form",{ref:"formModel",attrs:{rules:t.ruleValidate,model:t.formModel}},[t.showInput.show?t._e():n("FormItem",[n("Row",[n("Col",[n("Tooltip",{attrs:{placement:"top-start"}},[n("span",{staticStyle:{"font-size":"16px",color:"skyblue"}},[t._v("你的班级序号")]),t._v(" "),n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[t._v("刘老师给你分的序号")]),t._v(" "),n("p",[n("i",[t._v("职教云你的账号:1601 XX , XX就是你的序号")])])])])],1)],1),t._v(" "),n("Row",[n("Col",{attrs:{span:"8"}},[n("InputNumber",{staticStyle:{width:"100%"},attrs:{min:1,max:32,size:"large",placeholder:"序号1-32"},on:{"on-change":t.getUserName},model:{value:t.showInput.val,callback:function(e){t.$set(t.showInput,"val",e)},expression:"showInput.val"}})],1),t._v(" "),n("Col",{attrs:{span:"4"}},[n("Input",{attrs:{size:"large",disabled:""},model:{value:t.showInput.userName,callback:function(e){t.$set(t.showInput,"userName",e)},expression:"showInput.userName"}})],1)],1)],1),t._v(" "),t.showInput.show?t._e():n("FormItem",[n("Row",[n("Col",{attrs:{span:"6"}},[n("Button",{attrs:{type:"primary",size:"large",long:""},on:{click:t.InputClick}},[t._v("确定")])],1)],1)],1),t._v(" "),t._l(t.TypeData.content,function(e,a){return t.showInput.show?n("FormItem",{key:"val"+a,attrs:{prop:"val"+a}},[n("Row",{attrs:{align:"middle"}},[n("i-Col",{attrs:{span:"6"}},[n("label",{staticStyle:{"text-align":"right","font-size":"20px","margin-left":"15px"}},[t._v(t._s(e.name))])]),t._v(" "),n("i-Col",{attrs:{span:"18"}},[n("i-Input",{attrs:{size:"large"},model:{value:t.formModel["val"+a],callback:function(e){t.$set(t.formModel,"val"+a,e)},expression:"formModel['val'+index]"}})],1)],1)],1):t._e()}),t._v(" "),t.showInput.show?n("FormItem",[n("Row",[n("i-Col",{attrs:{offset:6}},[n("Button",{attrs:{type:"primary",size:"large"},on:{click:function(e){t.handleSubmit("formModel")}}},[t._v("提交")])],1)],1)],1):t._e()],2):n("Row",[n("i-Col",{attrs:{lg:{span:24}}},[n("span",{staticStyle:{"font-size":"20px","text-align":"center"}},[t._v("未检测到填写项 , 请检查链接是否有误")])])],1)],1)},staticRenderFns:[]};var I=n("VU/8")(w,y,!1,function(t){n("0aTS")},"data-v-473618ec",null).exports;a.default.prototype.qs=f.a,a.default.prototype.axios=p.a,a.default.component("my-entry",I),a.default.use(l.a),new a.default({el:"#app",render:function(t){return t(s)}})},krhF:function(t,e){}},["U67u"]);
//# sourceMappingURL=index.ff44434c2b15cecd66ab.js.map