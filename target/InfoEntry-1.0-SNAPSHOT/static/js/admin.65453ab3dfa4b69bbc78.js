webpackJsonp([1],{FbaT:function(t,e){},PfZh:function(t,e){},SMjw:function(t,e){},U6NS:function(t,e){},acUT:function(t,e){},hRzL:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticStyle:{"font-size":"30px"}},[this._v("暂时没有内容")])])}]};var s=a("VU/8")({name:"my-admin-main"},i,!1,function(t){a("PfZh")},"data-v-44b20b82",null).exports,o=a("Gu7T"),l=a.n(o),r=a("mvHQ"),c=a.n(r),u={name:"my-admin-cateAdd",data:function(){return{itemList:[],submitVal:{name:"",dialog:!1},addCateDialogVal:{cateName:"",required:"true",dialog:!1,rules:{cateName:[{required:!0,message:"类别名称不能为空",trigger:"blur"}]}}}},methods:{submit:function(){var t=this;if(""!=this.submitVal.name)if(0!=this.itemList.length){var e={content:c()([].concat(l()(this.itemList))),name:this.submitVal.name};this.axios.post("/InfoEntry/type/addType",this.qs.stringify(e)).then(function(e){1==e.data.state?t.$Modal.success({title:"保存成功",content:"您提交的数据已成功保存 , 您现在可以关闭此选项卡了"}):t.$Modal.error({title:"保存失败",content:"未知原因保存失败 , 请检查网络后再试"})})}else this.$Message.error("请添加类别");else this.$Message.error("项目名为必填项")},addCate:function(){""!=this.addCateDialogVal.cateName?(this.itemList.push({name:this.addCateDialogVal.cateName,required:"true"==this.addCateDialogVal.required}),this.addCateDialogVal.cateName="",this.addCateDialogVal.required="true"):this.$Message.error("类别名称为必填项")},itemUp:function(t){0!=t?(this.swapVal("up",t),this.refreshVal()):this.$Message.error("已经是第一个了哦")},itemDown:function(t){t!=this.itemList.length-1?(this.swapVal("down",t),this.refreshVal()):this.$Message.error("已经是最后一个了哦")},itemRemove:function(t){this.itemList.splice(t,1)},refreshVal:function(){this.itemList.push({}),this.itemList.splice(this.itemList.length-1,1)},swapVal:function(t,e){var a=1;"up"==t&&(a=-1);var n=this.itemList[e+a];this.itemList[e+a]=this.itemList[e],this.itemList[e]=n}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div-size"},[a("Form",{attrs:{"label-width":60}},[0==t.itemList.length?a("FormItem",[a("span",{staticStyle:{"font-size":"20px","text-align":"center"}},[t._v("请添加填写项")])]):t._e(),t._v(" "),t._l(t.itemList,function(e,n){return a("FormItem",{key:"key"+n,attrs:{label:e.name}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("i-Input",{attrs:{size:"large"}})],1),t._v(" "),a("Col",{attrs:{span:"4",offset:"1"}},[a("Checkbox",{model:{value:t.itemList[n].required,callback:function(e){t.$set(t.itemList[n],"required",e)},expression:"itemList[index].required"}},[a("span",{staticStyle:{"font-size":"16px"}},[t._v("非空")])])],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("ButtonGroup",[a("Button",{attrs:{type:"ghost",icon:"ios-arrow-up"},on:{click:function(e){t.itemUp(n)}}}),t._v(" "),a("Button",{attrs:{type:"ghost",icon:"ios-arrow-down"},on:{click:function(e){t.itemDown(n)}}}),t._v(" "),a("Button",{attrs:{type:"ghost",icon:"ios-close-outline"},on:{click:function(e){t.itemRemove(n)}}})],1)],1)],1)],1)}),t._v(" "),a("FormItem",[a("Row",[a("Col",{attrs:{span:"6"}},[a("Button",{attrs:{type:"info",size:"large",icon:"plus-circled",long:""},on:{click:function(e){t.addCateDialogVal.dialog=!0}}},[t._v("添加")]),t._v(" "),a("Modal",{attrs:{styles:{top:"220px"},title:"添加类别"},on:{"on-ok":t.addCate},model:{value:t.addCateDialogVal.dialog,callback:function(e){t.$set(t.addCateDialogVal,"dialog",e)},expression:"addCateDialogVal.dialog"}},[a("Form",{attrs:{"label-width":90}},[a("FormItem",{attrs:{label:"类别名称"}},[a("i-Input",{model:{value:t.addCateDialogVal.cateName,callback:function(e){t.$set(t.addCateDialogVal,"cateName",e)},expression:"addCateDialogVal.cateName"}})],1),t._v(" "),a("FormItem",{attrs:{label:"是否非空校验"}},[a("RadioGroup",{model:{value:t.addCateDialogVal.required,callback:function(e){t.$set(t.addCateDialogVal,"required",e)},expression:"addCateDialogVal.required"}},[a("Radio",{attrs:{label:"true"}},[t._v("是")]),t._v(" "),a("Radio",{attrs:{label:"false"}},[t._v("否")])],1)],1)],1)],1)],1),t._v(" "),a("Col",{attrs:{span:"6",offset:"2"}},[a("Button",{attrs:{type:"success",size:"large",icon:"checkmark-circled",long:""},on:{click:function(e){t.submitVal.dialog=!0}}},[t._v("提交")]),t._v(" "),a("Modal",{attrs:{styles:{top:"220px"},title:"项目名称"},on:{"on-ok":t.submit},model:{value:t.submitVal.dialog,callback:function(e){t.$set(t.submitVal,"dialog",e)},expression:"submitVal.dialog"}},[a("Form",{attrs:{"label-width":90}},[a("FormItem",{attrs:{label:"项目名称"}},[a("i-Input",{model:{value:t.submitVal.name,callback:function(e){t.$set(t.submitVal,"name",e)},expression:"submitVal.name"}})],1)],1)],1)],1)],1)],1)],2)],1)},staticRenderFns:[]};var m=a("VU/8")(u,d,!1,function(t){a("U6NS")},"data-v-18b1e2a8",null).exports,h={name:"my-admin-cateList",data:function(){var t=this;return{column:[{title:"项目名",key:"name",render:function(t,e){return t("span",{style:{fontSize:"16px"}},e.row.name)},renderHeader:function(t,e){return t("span",{style:{fontSize:"16px"}},"项目名")}},{title:"项目内容",key:"content",render:function(t,e){return t("span",{style:{fontSize:"16px"}},e.row.content)},renderHeader:function(t,e){return t("span",{style:{fontSize:"16px"}},"项目内容")}},{title:"已填写人数",key:"yesInput",render:function(t,e){return t("span",{style:{fontSize:"16px"}},e.row.yesInput)},renderHeader:function(t,e){return t("span",{style:{fontSize:"16px"}},"已填写人数")}},{title:"操作",key:"opera",align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"large",icon:"ios-copy-outline"},style:{marginRight:"5px"},on:{click:function(){var e=window.document.location.href,n=window.document.location.pathname,i=e.indexOf(n),s=e.substring(0,i)+"/InfoEntry/index.html?v="+a.row.id;t.$copyText(s).then(function(e){t.$Message.success("复制成功")},function(e){t.$Message.error("复制失败")})}}},"复制链接"),e("Button",{props:{type:"error",size:"large",icon:"ios-close"},style:{marginRight:"5px"},on:{click:function(){t.$Modal.confirm({title:"警告",content:"删除后所有用户填写的信息也会一并删除",onOk:function(){t.deleteItem(a.row.id)}})}}},"删除项目")])},renderHeader:function(t,e){return t("span",{style:{fontSize:"16px"}},"操作")}}],data:[]}},created:function(){this.getTableData()},methods:{getTableData:function(){var t=this;this.axios("/InfoEntry/type/getTableData").then(function(e){e.data.forEach(function(t,e,a){a[e].content="["+t.content.join()+"]"}),t.data=e.data})},deleteItem:function(t){var e=this,a={typeId:t};this.axios.post("/InfoEntry/type/deleteTypeAndContentByTypeId",this.qs.stringify(a)).then(function(t){1==t.data.state?(e.$Message.success(t.data.msg),e.getTableData()):e.$Message.error(t.data.msg)})}}},f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("Table",{attrs:{border:"",columns:this.column,data:this.data,"no-data-text":"暂无数据"}})],1)},staticRenderFns:[]};var p=a("VU/8")(h,f,!1,function(t){a("tqk4")},"data-v-18e2aa93",null).exports,v=a("BO1k"),b=a.n(v),g={name:"my-admin-dataList",data:function(){return{selectCate:{model:"",cateList:[]},loading:!1,tableFilter:{user:!0,yesInput:!0,noInput:!0,allTableList:[],yesTableList:[],noTableList:[]},columns:[],data:[]}},created:function(){this.getTypeData()},mounted:function(){},methods:{changeSelect:function(t){this.getTableData(t),this.tableFilter={user:!0,yesInput:!0,noInput:!0,allTableList:[],yesTableList:[],noTableList:[]}},changeCheck:function(t){switch(t){case"user":this.tableFilter.user?this.columns.splice(0,0,{title:"用户[学号,姓名]",key:"user"}):this.columns.splice(0,1);break;default:this.tableFilter.yesInput&&(this.data=this.tableFilter.yesTableList),this.tableFilter.noInput&&(this.data=this.tableFilter.noTableList),this.tableFilter.yesInput&&this.tableFilter.noInput?this.data=this.tableFilter.allTableList:this.tableFilter.yesInput||this.tableFilter.noInput||(this.data=[])}},exportData:function(){var t=this;this.loading=!0,this.$refs.table.exportCsv({filename:"table_data_"+(new Date).toLocaleString()}),setTimeout(function(){t.loading=!1},1e3)},getTypeData:function(){var t=this;this.axios.post("/InfoEntry/type/getAllType").then(function(e){e.data.forEach(function(t,e,a){a[e].content=JSON.parse(t.content),a[e].inputList=[];var n=!0,i=!1,s=void 0;try{for(var o,l=b()(a[e].content);!(n=(o=l.next()).done);n=!0){var r=o.value;a[e].inputList.push(r.name)}}catch(t){i=!0,s=t}finally{try{!n&&l.return&&l.return()}finally{if(i)throw s}}}),t.selectCate.cateList=e.data})},getTableData:function(t){var e=this,a={typeId:t};this.axios.post("/InfoEntry/content/getTableData",this.qs.stringify(a)).then(function(t){e.columns=t.data.columns,e.data=t.data.data,e.tableFilter.allTableList=e.data,e.tableFilter.yesTableList=e.data.filter(function(t){return t.hasData}),e.tableFilter.noTableList=e.data.filter(function(t){return!t.hasData})})}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"margin-bottom":"40px"}},[a("Row",[a("Col",{attrs:{span:"10",gutter:16}},[a("Select",{attrs:{placeholder:"请先选择项目..","not-found-text":"暂无项目",filterable:""},on:{"on-change":t.changeSelect},model:{value:t.selectCate.model,callback:function(e){t.$set(t.selectCate,"model",e)},expression:"selectCate.model"}},t._l(t.selectCate.cateList,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[a("span",[t._v(t._s(e.name))]),t._v(" "),a("span",{staticStyle:{float:"right",color:"#ccc"}},[t._v("["+t._s(e.inputList.join())+"]")])])}))],1),t._v(" "),""!=t.selectCate.model?a("Col",{attrs:{offset:"2"}},[a("Button",{attrs:{type:"info",shape:"circle",loading:t.loading,icon:"ios-cloud-download-outline"},on:{click:t.exportData}},[t._v("导出数据")])],1):t._e()],1),t._v(" "),""!=t.selectCate.model?a("Row",{attrs:{"class-name":"row-class"}},[a("Col",[a("Checkbox",{attrs:{size:"large"},on:{"on-change":function(e){t.changeCheck("user")}},model:{value:t.tableFilter.user,callback:function(e){t.$set(t.tableFilter,"user",e)},expression:"tableFilter.user"}},[a("span",{staticStyle:{"font-size":"15px"}},[t._v("显示用户列")])]),t._v(" "),a("Checkbox",{attrs:{size:"large"},on:{"on-change":function(e){t.changeCheck("yesInput")}},model:{value:t.tableFilter.yesInput,callback:function(e){t.$set(t.tableFilter,"yesInput",e)},expression:"tableFilter.yesInput"}},[a("span",{staticStyle:{"font-size":"15px"}},[t._v("已填写用户")])]),t._v(" "),a("Checkbox",{attrs:{size:"large"},on:{"on-change":function(e){t.changeCheck("noInput")}},model:{value:t.tableFilter.noInput,callback:function(e){t.$set(t.tableFilter,"noInput",e)},expression:"tableFilter.noInput"}},[a("span",{staticStyle:{"font-size":"15px"}},[t._v("未填写用户")])])],1)],1):t._e(),t._v(" "),a("Row",[a("Col")],1)],1),t._v(" "),a("Table",{ref:"table",attrs:{border:"",columns:t.columns,data:t.data,"no-data-text":"暂无数据"}})],1)},staticRenderFns:[]};var _={components:{MyAdminDataList:a("VU/8")(g,y,!1,function(t){a("FbaT")},"data-v-38dbd0e8",null).exports,MyAdminCateList:p,MyAdminCateAdd:m,MyAdminMain:s},data:function(){return{heightStyle:{background:"#fff",height:"",overflowY:"auto"},tabs:{cateAdd:!1,cateList:!1,dataList:!1,value:"main"},userName:"loading..",mainLabel:function(t){return t("div",[t("Icon",{props:{type:"monitor"}}),t("span","主页")])}}},created:function(){var t=this;this.getWindowHeight(),setTimeout(function(){console.info("loading name. . . ."),t.getUserMsg()},2e3)},methods:{selectMenu:function(t){this.tabs[t]=!0,this.tabs.value=t},handleTabRemove:function(t){this.tabs[t]=!1},handleTabClick:function(t){this.tabs.value=t},selectExit:function(){var t=this;this.axios.post("/InfoEntry/admin/exitUser").then(function(e){1==e.data.state?window.location="/InfoEntry/login":t.$Message.error(e.data.msg)})},getWindowHeight:function(){var t=this;setInterval(function(){t.heightStyle.height=window.innerHeight-70+"px"},100)},getUserMsg:function(){var t=this;this.axios.post("/InfoEntry/admin/getSessionUserMsg").then(function(e){t.userName=e.data.msg})}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout"},[a("Layout",[a("Header",[a("Menu",{attrs:{mode:"horizontal",theme:"dark","active-name":"1"}},[a("div",{staticClass:"layout-logo"},[t._v("在线填表系统后台管理")]),t._v(" "),a("div",{staticClass:"layout-nav"},[a("MenuItem",{attrs:{name:"1"}},[a("Avatar",{attrs:{src:"/InfoEntry/static/img/admin/cat.png"}}),t._v("\n            "+t._s(t.userName)+"\n          ")],1),t._v(" "),a("MenuItem",{attrs:{name:"2"},on:{"on-select":t.selectExit}},[a("Icon",{attrs:{type:"power"}}),t._v(" "),a("span",{on:{click:t.selectExit}},[t._v("注销")])],1)],1)])],1),t._v(" "),a("Layout",[a("Sider",{style:t.heightStyle,attrs:{"hide-trigger":""}},[a("Menu",{attrs:{"active-name":t.tabs.value,theme:"light",width:"auto"},on:{"on-select":t.selectMenu}},[a("MenuItem",{attrs:{name:"main"}},[a("Icon",{attrs:{type:"monitor"}}),t._v("\n            主页\n          ")],1),t._v(" "),a("Submenu",{attrs:{name:"1"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"compose"}}),t._v("\n              大类管理\n            ")],1),t._v(" "),a("MenuItem",{attrs:{name:"cateAdd"}},[t._v("类别添加")]),t._v(" "),a("MenuItem",{attrs:{name:"cateList"}},[t._v("类别列表")])],2),t._v(" "),a("Submenu",{attrs:{name:"2"}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:"ios-keypad"}}),t._v("\n              数据管理\n            ")],1),t._v(" "),a("MenuItem",{attrs:{name:"dataList"}},[t._v("数据列表")])],2)],1)],1),t._v(" "),a("Layout",[a("Content",{style:t.heightStyle},[a("Tabs",{attrs:{type:"card",value:t.tabs.value},on:{"on-tab-remove":t.handleTabRemove,"on-click":t.handleTabClick}},[a("TabPane",{attrs:{label:t.mainLabel,name:"main"}},[a("my-admin-main")],1),t._v(" "),t.tabs.cateAdd?a("TabPane",{attrs:{label:"类别添加",name:"cateAdd",closable:""}},[a("my-admin-cate-add")],1):t._e(),t._v(" "),t.tabs.cateList?a("TabPane",{attrs:{label:"类别列表",name:"cateList",closable:""}},[a("my-admin-cate-list")],1):t._e(),t._v(" "),t.tabs.dataList?a("TabPane",{attrs:{label:"数据列表",name:"dataList",closable:""}},[a("my-admin-data-list")],1):t._e()],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var I=a("VU/8")(_,x,!1,function(t){a("acUT")},"data-v-86180710",null).exports,L=a("OFNa"),C=a.n(L),k=(a("SMjw"),a("aozt")),w=a.n(k),T=a("6iV/"),F=a.n(T),V=a("KPKd"),M=a.n(V);n.default.use(C.a,{size:"large"}),n.default.prototype.qs=F.a,n.default.prototype.axios=w.a,n.default.use(M.a),new n.default({el:"#app",render:function(t){return t(I)}})},tqk4:function(t,e){}},["hRzL"]);
//# sourceMappingURL=admin.65453ab3dfa4b69bbc78.js.map